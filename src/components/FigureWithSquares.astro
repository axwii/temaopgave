---
const {
  beforeTop: beforePositionTop,
  beforeLeft: beforePositionLeft,
  beforeRight: beforePositionRight,
  afterTop: afterPositionTop,
  afterLeft: afterPositionLeft,
  afterRight: afterPositionRight,
  imgSrc,
  imgAlt,
} = Astro.props;
---

<figure>
  <img src={imgSrc} alt={imgAlt} />
</figure>

<style
  define:vars={{
    beforePositionTop,
    beforePositionLeft,
    beforePositionRight,
    afterPositionTop,
    afterPositionLeft,
    afterPositionRight,
  }}
>
  figure {
    margin-top: 3rem;
    position: relative;
  }

  figure::before {
    --square-count: 10;
    --square-size: 1.5rem;
    --_square-size: var(--square-size, 1rem);
    --_square-half: calc(var(--square-size) / 2);
    --_square-sum: calc(var(--square-count) * var(--square-size));
    z-index: 1;
    content: "";
    position: absolute;
    top: var(--beforePositionTop);
    left: var(--beforePositionLeft);
    right: var(--beforePositionRight);
    inline-size: calc(
      round(var(--_square-sum), var(--_square-size)) - var(--_square-half)
    );
    aspect-ratio: 1;
    background: linear-gradient(
        135deg,
        #be965d,
        #976f40,
        #c99b61,
        #f0be7b,
        #ffcb85,
        #eebc79,
        #c0935b,
        #976f40
      )
      0 0 / 100% 100%;
    mask:
      var(--square-pattern) 0 0 / var(--_square-size) var(--_square-size),
      var(--square-pattern) var(--_square-half) var(--_square-half) /
        var(--_square-size) var(--_square-size);
  }

  figure::after {
    content: "";
    position: absolute;
    top: var(--afterPositionTop);
    left: var(--afterPositionLeft);
    right: var(--afterPositionRight);
    background: #4eaf4e;
    width: 150px;
    height: 150px;
    border-radius: 20px;
    z-index: 2;
  }

  img {
    inline-size: 100%;
    display: block;
    position: relative;
    border-radius: 20px;
    z-index: 10;
  }
</style>